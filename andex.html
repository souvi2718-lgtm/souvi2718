<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ</title>

<style>
body {
    font-family: "Cairo", sans-serif;
    background: #eef2f7;
    padding: 20px;
    text-align: center;
}

.box {
    background: white;
    padding: 20px;
    max-width: 480px;
    margin: auto;
    border-radius: 14px;
    box-shadow: 0 4px 15px rgba(0,0,0,0.1);
}

input, button {
    width: 100%;
    padding: 12px;
    margin-top: 12px;
    border-radius: 10px;
    border: 1px solid #ccc;
    font-size: 18px;
}

button {
    background: #007bff;
    color: white;
    border: none;
    cursor: pointer;
}

button:hover {
    background: #0056b3;
}

#result {
    margin-top: 20px;
    text-align: right;
    font-size: 18px;
    line-height: 1.8;
}

.profile-img {
    width: 120px;
    height: 120px;
    border-radius: 12px;
    object-fit: cover;
    margin-top: 10px;
    display: none;
}

.map {
    width: 100%;
    height: 300px;
    margin-top: 15px;
    border-radius: 12px;
    display: none;
}
</style>

<script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database.js"></script>

</head>
<body>

<div class="box">
    <h2>ğŸ” Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ</h2>

    <input type="text" id="phone" placeholder="Ø£Ø¯Ø®Ù„ Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ">
    <button onclick="searchPhone()">Ø¨Ø­Ø«</button>

    <img id="profileImage" class="profile-img">

    <div id="result"></div>

    <iframe id="mapFrame" class="map"></iframe>
</div>

<script>
// ---------------------------
// ğŸ”¥ Ø¶Ø¹ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Firebase Ù‡Ù†Ø§
// ---------------------------
const firebaseConfig = {
  apiKey: "Ø¶Ø¹_API_KEY_Ù‡Ù†Ø§",
  authDomain: "Ø¶Ø¹_Ù‡Ù†Ø§",
  databaseURL: "Ø¶Ø¹_Ù‡Ù†Ø§",
  projectId: "Ø¶Ø¹_Ù‡Ù†Ø§",
  storageBucket: "Ø¶Ø¹_Ù‡Ù†Ø§",
  messagingSenderId: "Ø¶Ø¹_Ù‡Ù†Ø§",
  appId: "Ø¶Ø¹_Ù‡Ù†Ø§"
};

// ØªØ´ØºÙŠÙ„ Firebase
firebase.initializeApp(firebaseConfig);
const db = firebase.database();

// Ø¯Ø§Ù„Ø© Ø§Ù„Ø¨Ø­Ø«
<script>
function searchPhone() {
    let number = document.getElementById("phone").value.trim();
    let resultBox = document.getElementById("result");
    let mapFrame = document.getElementById("mapFrame");
    let img = document.getElementById("profileImage");

    if (number === "") {
        resultBox.innerHTML = "â— Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ";
        return;
    }

    firebase.database().ref("phones/" + number).once("value").then(function(snapshot) {
        if (snapshot.exists()) {

            let data = snapshot.val();

            let name = data.name || "ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ";
            let address = data.address || "ØºÙŠØ± Ù…ØªÙˆÙØ±";
            let city = data.city || "ØºÙŠØ± Ù…ØªÙˆÙØ±";
            let company = data.company || "ØºÙŠØ± Ù…ØªÙˆÙØ±";
            let notes = data.notes || "Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù„Ø§Ø­Ø¸Ø§Øª";
            let lat = data.lat;
            let lng = data.lng;

            resultBox.innerHTML =
                "<strong>ğŸ‘¤ Ø§Ù„Ø§Ø³Ù…:</strong> " + name + "<br>" +
                "<strong>ğŸ“ Ø§Ù„Ø¹Ù†ÙˆØ§Ù†:</strong> " + address + "<br>" +
                "<strong>ğŸ™ Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©:</strong> " + city + "<br>" +
                "<strong>ğŸ¢ Ø§Ù„Ø´Ø±ÙƒØ©:</strong> " + company + "<br>" +
                "<strong>ğŸ“ Ù…Ù„Ø§Ø­Ø¸Ø§Øª:</strong> " + notes;

            if (data.image) {
                img.src = data.image;
                img.style.display = "block";
            } else {
                img.style.display = "none";
            }

            if (lat && lng) {
                mapFrame.style.display = "block";
                mapFrame.src =
                    "https://www.google.com/maps?q=" + lat + "," + lng + "&z=15&output=embed";
            } else {
                mapFrame.style.display = "none";
            }

        } else {
            resultBox.innerHTML = "âŒ Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ù‡Ø°Ø§ Ø§Ù„Ø±Ù‚Ù…";
            img.style.display = "none";
            mapFrame.style.display = "none";
        }
    });
}
</script>

            } else {
                img.style.display = "none";
            }

            if (lat && lng) {
                mapFrame.style.display = "block";
                mapFrame.src =
                    "https://www.google.com/maps?q=" + lat + "," + lng + "&z=15&output=embed";
            } else {
                mapFrame.style.display = "none";
            }

        } else {
            resultBox.innerHTML = "âŒ Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ù‡Ø°Ø§ Ø§Ù„Ø±Ù‚Ù…";
            img.style.display = "none";
            mapFrame.style.display = "none";
        }
    });
}
</script>

</body>
</html>
